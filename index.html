<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Test PhoneGap</title>
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width">
<link rel="stylesheet" href="css/jquery.mobile-1.2.0.css" />
<link rel="stylesheet" href="css/style.css" />
<script src="js/jquery-1.8.2.min.js"></script>
<script src="js/jquery.mobile-1.2.0.min.js"></script>
<script src="js/cordova-2.1.0.js"></script>
    <script type="text/javascript">
      //Location content
      var lc;
      //PhoneGap Ready variable
      var pgr = false;

      function onBodyLoad() {
        //During testing, Let me know we got this far
        //alert("onBodyLoad");
        //Add the PhoneGap deviceready event listener
        document.addEventListener("deviceready", onDeviceReady, false);
      }

      function onDeviceReady() {
        //During testing, Let me know PhoneGap actually
        // initialized
        // alert("onDeviceReady");
        //Get a handle we'll use to adjust the accelerometer
        //content
        lc = document.getElementById("locationInfo");
        //Set the variable that lets other parts of the program
        //know that PhoneGap is initialized
        pgr = true;
      }

      function getLocation() {
        alert("getLocation");
        if(pgr == true) {
          var locOptions = {
            timeout : 5000,
            enableHighAccuracy : true
          };
          //get the current location
          navigator.geolocation.getCurrentPosition(onLocationSuccess, onLocationError, locOptions);
          //Clear the current location while we wait for a reading
          lc.innerHTML = "Reading location...";

        } else {
          alert("Please wait,\nPhoneGap is not ready.");
        }
      }

      function onLocationSuccess(loc) {
        //alert("onLocationSuccess");
        //We received something from the API, so first get the
        // timestamp in a date object so we can work with it
        var d = new Date(loc.timestamp);
        //Then replace the page's content with the current
        // location retrieved from the API
        lc.innerHTML = '<b>Current Location</b><hr /><b>Latitude</b>: ' + loc.coords.latitude + '<br /><b>Longitude</b>: ' + loc.coords.longitude + '<br /><b>Altitude</b>: ' + loc.coords.altitude + '<br /><b>Accuracy</b>: ' + loc.coords.accuracy + '<br /><b>Altitude Accuracy</b>: ' + loc.coords.altitudeAccuracy + '<br /><b>Heading</b>: ' + loc.coords.heading + '<br /><b>Speed</b>: ' + loc.coords.speed + '<br /><b>Timestamp</b>: ' + d.toLocaleString();
      }

      function onLocationError(e) {
        alert("Geolocation error: #" + e.code + "\n" + e.message);
      }
    </script>
</head>
<body onload="onBodyLoad()">


<!-- ################################### BEGIN MAIN PAGE ######################################## -->

<div data-role="page" id="list_page" data-theme="c">

<!-- BEGIN HEADER -->
<div id="header" data-role="header" data-position="fixed" data-theme="c">
THIS IS HEADER
</div>
<!-- END HEADER -->


<!-- BEGIN CONTENT -->
<div data-role="content">

    <h1>Geolocation API Demo #1</h1>
    <p>
      Click the button to determine the current location.
    </p>
    <input type="button" value="Refresh Location" onclick="getLocation();">
    <hr />
    <p id="locationInfo">
      Nothing to see here (yet), click the button.
    </p>

</div>
<!-- END CONTENT -->

<!-- BEGIN FOOTER -->
<div data-role="footer" data-position="fixed" style="height: 50px; vertical-align:middle">
THIS IS FOOTER
<!-- END FOOTER -->

</div>

<!-- ##################################### END MAIN PAGE ######################################### -->





</body>
</html>